<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Mapa com MapLibre</title>
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { width: 100%; height: 600px; }
    .marker {
      width: 20px;
      height: 20px;
      background-color: #00cc66;
      border: 2px solid black;
      border-radius: 4px;
      box-shadow: 0 0 5px #000;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script>
    const map = new maplibregl.Map({
      container: 'map',
      style: 'https://demotiles.maplibre.org/style.json',
      center: [-53, -29.5],
      zoom: 6
    });

    map.addControl(new maplibregl.NavigationControl());

    map.on('load', () => {
      fetch('/frontend/dados/terras-rs.geojson')
        .then(response => response.json())
        .then(data => {
          data.features.forEach(feature => {
            const el = document.createElement('div');
            el.className = 'marker';
            const [lng, lat] = feature.geometry.coordinates;

            new maplibregl.Marker(el)
              .setLngLat([lng, lat])
              .setPopup(
                new maplibregl.Popup({ offset: 25 }).setText(
                  feature.properties.nome || 'Terra Ind√≠gena'
                )
              )
              .addTo(map);
          });
        });
    });
  </script>
</body>
</html>
